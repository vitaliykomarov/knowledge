Настроим динамическую маршрутизацию с помощью протоколов RIP и OSPF
Задачи
1)RIP
2)OSPF
Статика c EDGE в сторону ISP
С ISP статика во все сетки
 
Первым настроим RIP и проверим сеть (так как маршрутизатор выбирает приоритетным OSPF протокол для маршрутизации)

Начнем с настройки R1
Настроим каждый порт задав соответствующий IP-адрес и маску
Перейдем к настройке RIP
Для этого в режиме конфигурирования введем команду router rip
Переведем его в режим работы 2 версии командой version 2 и объявим сеть командой network 172.16.0.0
(так как роутер подключен к 3 подсетям начинающимися на 172.16.*.* то можно обявить их одной командой)

Перейдем к настройки R2
Аналогично R1 настроим порты и перейдем к настройки RIP
Также объявим network 172.16.0.0, и network 192.168.2.0 для сети находящейся за маршрутизатором

Аналогичным образом настраиваем и объявляем маршруты на R3

Приступим к настройке EDGE
В начале настроим порты задав соответствующий IP-адрес и маску
Теперь зададим статические маршруты для маршрутизации трафика в сторону Интернета
ip route 10.10.10.0 255.255.255.0 GigabitEthernet0/0 (укажем порт через который будет идти статическая маршрутизация)
ip route 0.0.0.0 0.0.0.0 GigabitEthernet0/0
Перейдем к настройки RIP
Объявим network 172.16.0.0
Командой passive-interface GigabitEthernet0/0 запретим слать обновления о маршрутах в Интернет
И командой default-information originate объявим статические маршруты, которые RIP будет анонсировать в сеть

Настроим последний роутер ISP
Аналогично настраиваем порты, но маршрутизация будет статической
ip route 172.16.0.0 255.255.255.0 GigabitEthernet0/1 
ip route 172.16.1.0 255.255.255.0 GigabitEthernet0/1 
ip route 172.16.2.0 255.255.255.0 GigabitEthernet0/1 
ip route 172.16.3.0 255.255.255.0 GigabitEthernet0/1 
ip route 192.168.1.0 255.255.255.0 GigabitEthernet0/1 
ip route 192.168.2.0 255.255.255.0 GigabitEthernet0/1 


Сеть с маршрутизацией по протоколу RIP настроена
Проверим сеть командой пинг c PC1 до PC2
Трафик проходит

Командой show ip route можно посмотреть полученные маршруты
Буква R означает что маршрут получен с помощью протокола RIP


Теперь настроим протокол OSPF
Начнем с R1
Для этого введем команду router ospf 1 (1-ospf id) в режиме конфигурирования
Зададим ID командой router-id 1.1.1.1 (если ID не задать, то роутер выберет его по-умолчанию, в зависимости от настроен сети)
Объявим подсети
network 172.16.1.0 0.0.0.255 area 0
network 172.16.2.0 0.0.0.255 area 0
network 172.16.3.0 0.0.0.255 area 0
(0.0.0.255 - При настройке OSPF используется обратная маска. Эта маска показывает какая часть (сколько бит) IP адреса могут меняться.
area 0 - (area id) идентификатор зоны, в которой будет работать интерфейс маршрутизатора. 
Интерфейс попадет в эту зону при условии, что его IP-адрес совпадает с сетью, указанной с помощью network и wildcard mask. 
Для небольших сетей этот параметр можно указывать равным 0, но для больших сетей необходимо соблюдать иерархический 
дизайн зон в OSPF. Все обновления OSPF, которые передаются между различными зонами, должны проходить через зону 0.)

Аналогичным образом настраиваем R2 и R3
Настраивать ISP роутер не требуется, настроим EDGE
Настройка будет аналогичной, но необходимо так же объявить статические маршруты командой default-information originate

Настройка OSPF выполнена, на любом роутере введем show ip route
Как видно на скриншоте маршруты обновились, вместо R указываются O, что означает маршрут получен по протоколу OSPF
(OSPF является приоритетным протоколом, поэтому все маршруты изменились на ОSPF)

Проверим сеть командой пинг c PC1 до PC0 и PC2
Пинг проходит
Маршрутизация настроена, все работает